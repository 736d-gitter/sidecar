dependencies:
  cache_directories:
    - browserstack

test:
  override:
    - npm run build-production
    - ci/browserstack_tunnel.sh
    - browserstack/BrowserStackLocal -f $BS_KEY `pwd`/dist:
        background: true
    - mocha
    - ci/browserstack_tunnel.sh stop

deployment:
  release:
    tag: /v[0-9]+(\.[0-9]+)*/
    owner: gitterhq
    commands:
      - npm run deploy
